<!DOCTYPE html>
<html lang="en" ng-app="myapp" ng-controller="mycon">
    <head>
        <meta charset="UTF-8">
        <title>Title Registration</title>
        <style type="text/css">
            h1{
                text-align: center;
                padding-top: 50px;
            }
        </style>
        <meta http-equiv="content-type" content="text/html; charset=utf-8" />
        <meta name="description" content="" />
        <meta name="keywords" content="" />
        <script src="js/jquery.min.js"></script>
        <script src="js/skel.min.js"></script>
        <script src="js/skel-layers.min.js"></script>
        <script src="js/init.js"></script>
        <noscript>
        <link rel="stylesheet" href="css/skel.css" />
        <link rel="stylesheet" href="css/style.css" />
        <link rel="stylesheet" href="css/style-xlarge.css" />
        </noscript>
    </head>
    <body style="background-image:url(images/pic.jpg);background-size:  cover;">
        <div style="background-image:url('images/pic.jpg');background-repeat:no-repeat;">
        </div>

        <h1><font color="white">Title Registration Page</font></h1>
        <br>
        <br>
        <br>
        <br>
        <h2 style=" float: left;margin-left:30%;color:white;">Title: <input type="text" ng-model="title" style="margin-left: 50px; background-color: white;float:right;width: 500px;color: black;"></h2>
        <br><br><input type="button" class="button" style="margin-left: 50%;" value="SUBMIT" ng-click="check()">
        <script
        src="http://ajax.googleapis.com/ajax/libs/angularjs/1.3.14/angular.min.js"></script>

        <script>
                        function getURLParameter(name) {
                            return decodeURIComponent((new RegExp('[?|&]' + name + '=' + '([^&;]+?)(&|#|;|$)').exec(location.search) || [, ""])[1].replace(/\+/g, '%20')) || null;
                        }
                        var grno = getURLParameter('reg');

                        var myapp = angular.module('myapp', []);
                        myapp.controller('mycon', function ($scope, $http) {
                            var x = "check";
                            var url = 'webresources/userauth/' + x;
                            //alert(url);
                            $http.get(url).success(function (response) {
                                //alert(response);
                                if (response === "True")
                                {
                                    //alert("Authentic");
                                }
                                else
                                {
                                    window.location = '/MiniProjectReg/index.html';
                                }
                            }).error(function (response) {
                                //alert("Resource not found");
                            });
                            $scope.check = function () {
                                var url = 'webresources/titlecheck/' + $scope.title +'/'+ grno;
                                //alert(url);
                                $http.get(url).success(function (response) {
                                    //alert(response);
                                    if(response==="Same title is already registered!")
                                    {
                                        alert("Same title is already registered!");
                                    }
                                    else
                                    {
                                    window.location = '/MiniProjectReg/firstpage.html?record='+response;
                                    }   


                                }).error(function (response) {
                                    alert("Resource not found");
                                });
                            };
                        });
        </script>
    </body>

</html>